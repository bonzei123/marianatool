version: '3.8'

services:
  webtool:
    build: .
    container_name: marianatool
    restart: always
    ports:
      - "5000:5000"  # Port 5000 auf dem NAS erreichbar
    environment:
      # WICHTIG: Pfad zur DB im Container (/data Ordner)
      # Dieser Pfad muss mit dem Volume-Mapping unten Ã¼bereinstimmen!
      - DB_PATH=/data/site.db
      - SECRET_KEY=8601fa73e96f6251778e617559d8f090
    volumes:
      # 1. DATENBANK PERSISTENZ
      # Links: Ordner auf dem NAS (relativ zur docker-compose.yml oder absolut)
      # Rechts: Ordner im Container (Muss /data sein, wie im Dockerfile vorbereitet)
      - ./db_data:/data

      # 2. UPLOADS PERSISTENZ
      # Links: Ordner auf dem NAS
      # Rechts: Der Upload-Pfad im Container (app/static/uploads)
      - ./uploads:/app/app/static/uploads