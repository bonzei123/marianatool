{% extends "layout.html" %}

{% block container_type %}container-fluid px-4{% endblock %}

{% block sidebar_specific %}
    <div class="alert alert-info small">
        <i class="bi bi-info-circle-fill"></i> <strong>Onboarding Editor</strong><br>
        Hier definierst du die Schritte, die ein neuer User einmalig bestÃ¤tigen muss.
    </div>
    <button class="btn btn-brand w-100 mb-2" onclick="saveConfig()">ğŸ’¾ Speichern</button>
    <button class="btn btn-light border w-100 mb-2" onclick="addSection()">+ Neuer Abschnitt</button>
    <button class="btn btn-neutral w-100 mb-4" onclick="togglePreview()">ğŸ‘ï¸ Vorschau an/aus</button>

    <div class="mt-4">
        <a href="{{ url_for('admin.global_settings_view') }}" class="btn btn-outline-secondary w-100">ZurÃ¼ck</a>
    </div>
{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/immo_admin.css') }}">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="m-0 text-primary">ğŸš€ Onboarding Konfiguration</h2>
</div>

<div id="builder-config"
     data-load-url="{{ url_for('formbuilder.get_onboarding_config') }}"
     data-save-url="{{ url_for('formbuilder.save_onboarding_config') }}"
     data-preview-storage-key="onboarding_admin_preview">
</div>

<div class="admin-wrapper" id="adminWrapper">
    <div class="editor-pane" id="editorPane">
        <div id="editorContainer"></div>
    </div>
    <div class="resizer" id="dragMe"></div>
    <div class="preview-pane" id="previewPane">
        <div class="preview-container">
            <h3 style="color:#19835A; margin-top:0;">Vorschau</h3>
            <div id="previewContent"></div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/immo_admin.js') }}"></script>
{% endblock %}