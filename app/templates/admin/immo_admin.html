{% extends "layout.html" %}

{% block container_type %}container-fluid px-4{% endblock %}

{% block sidebar_specific %}
    <button class="btn btn-brand w-100 mb-2" onclick="saveConfig()">ğŸ’¾ Speichern</button>
    <button class="btn btn-light border w-100 mb-2" onclick="addSection()">+ Neuer Abschnitt</button>
    <button class="btn btn-neutral w-100 mb-4" onclick="togglePreview()">ğŸ‘ï¸ Vorschau an/aus</button>
    <div class="border-top pt-3 mt-3">
        <label class="small text-muted fw-bold mb-2">Backup laden:</label>
        <select id="backupLoader" class="form-select form-select-sm" onchange="loadBackup(this.value)">
            <option value="">WÃ¤hle Sicherung...</option>
        </select>
    </div>
{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/immo_admin.css') }}">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="m-0">ğŸ› ï¸ Formular Editor</h2>
</div>

<div class="admin-wrapper" id="adminWrapper">
    <div class="editor-pane" id="editorPane">
        <div id="editorContainer"></div>
    </div>
    <div class="resizer" id="dragMe"></div>
    <div class="preview-pane" id="previewPane">
        <div class="preview-container">
            <h3 style="color:#19835A; margin-top:0;">Vorschau</h3>
            <div class="sim-top-controls">
                <div class="sim-label">Simulation: Immobilien Typ</div>
                <select id="simSelector" class="form-select form-select-sm" onchange="currentSimType=this.value; renderPreview()">
                    <option value="einzel" selected>Einzelanbau</option>
                    <option value="cluster">Anbaucluster</option>
                    <option value="ausgabe">Ausgabestelle</option>
                </select>
            </div>
            <div id="previewContent"></div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/immo_admin.js') }}"></script>
{% endblock %}